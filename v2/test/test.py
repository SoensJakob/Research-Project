from lorem_text import lorem
# testJson = [{'image': 'data/testset/1.jpg', 'element': 'checkbox', 'Xmin': 342.01727294921875, 'Ymin': 180.20726013183594, 'Xmax': 380.8283386230469, 'Ymax': 204.06065368652344}, {'image': 'data/testset/1.jpg', 'element': 'input', 'Xmin': 136.3526153564453, 'Ymin': 378.1545104980469, 'Xmax': 237.2847137451172, 'Ymax': 409.4936218261719}, {'image': 'data/testset/1.jpg', 'element': 'container', 'Xmin': 74.13134002685547, 'Ymin': 48.43134689331055, 'Xmax': 472.73956298828125, 'Ymax': 581.5693969726562}, {'image': 'data/testset/1.jpg', 'element': 'nav', 'Xmin': 99.70208740234375, 'Ymin': 0.7413360476493835, 'Xmax': 441.438720703125, 'Ymax': 59.2564582824707}, {'image': 'data/testset/1.jpg', 'element': 'input', 'Xmin': 131.4426727294922, 'Ymin': 423.8160095214844, 'Xmax': 231.88121032714844, 'Ymax': 454.2653503417969}, {'image': 'data/testset/1.jpg', 'element': 'footer', 'Xmin': 109.6015625, 'Ymin': 589.8401489257812, 'Xmax': 420.39453125, 'Ymax': 640.0}, {'image': 'data/testset/1.jpg', 'element': 'heading', 'Xmin': 132.9291534423828, 'Ymin': 175.5521697998047, 'Xmax': 279.1910095214844, 'Ymax': 214.1087188720703}, {'image': 'data/testset/1.jpg', 'element': 'text', 'Xmin': 127.9345932006836, 'Ymin': 241.01658630371094, 'Xmax': 283.12786865234375, 'Ymax': 346.3274230957031}, {'image': 'data/testset/1.jpg', 'element': 'button', 'Xmin': 129.6591339111328, 'Ymin': 466.91143798828125, 'Xmax': 229.4464874267578, 'Ymax': 514.4118041992188}, {'image': 'data/testset/1.jpg', 'element': 'frame', 'Xmin': 120.45472717285156, 'Ymin': 91.59654998779297, 'Xmax': 400.71514892578125, 'Ymax': 170.77984619140625}]

# testJson = [{'image': 'data/testset/9.jpg', 'element': 'checkbox', 'Xmin': 442.7769470214844, 'Ymin': 273.114990234375, 'Xmax': 487.9964904785156, 'Ymax': 296.7840881347656}, {'image': 'data/testset/9.jpg', 'element': 'input', 'Xmin': 378.5519714355469, 'Ymin': 371.9627685546875, 'Xmax': 503.2818298339844, 'Ymax': 403.1077880859375}, {'image': 'data/testset/9.jpg', 'element': 'container', 'Xmin': 100.77007293701172, 'Ymin': 72.8052978515625, 'Xmax': 583.8248901367188, 'Ymax': 589.2657470703125}, {'image': 'data/testset/9.jpg', 'element': 'input', 'Xmin': 374.1836853027344, 'Ymin': 335.9939880371094, 'Xmax': 508.28448486328125, 'Ymax': 368.3572692871094}, {'image': 'data/testset/9.jpg', 'element': 'heading', 'Xmin': 149.01499938964844, 'Ymin': 260.0863952636719, 'Xmax': 299.1177673339844, 'Ymax': 301.9492492675781}, {'image': 'data/testset/9.jpg', 'element': 'frame', 'Xmin': 146.84783935546875, 'Ymin': 148.29087829589844, 'Xmax': 519.7570190429688, 'Ymax': 261.343505859375}, {'image': 'data/testset/9.jpg', 'element': 'nav', 'Xmin': 121.6964111328125, 'Ymin': 60.6829948425293, 'Xmax': 531.4854736328125, 'Ymax': 134.2144775390625}, {'image': 'data/testset/9.jpg', 'element': 'text', 'Xmin': 157.5534210205078, 'Ymin': 331.3647155761719, 'Xmax': 295.8243103027344, 'Ymax': 433.1098327636719}, {'image': 'data/testset/9.jpg', 'element': 'button', 'Xmin': 375.57177734375, 'Ymin': 417.2091979980469, 'Xmax': 504.2676696777344, 'Ymax': 466.1307678222656}, {'image': 'data/testset/9.jpg', 'element': 'footer', 'Xmin': 139.5625457763672, 
# 'Ymin': 534.2808837890625, 'Xmax': 510.4588928222656, 'Ymax': 597.9498901367188}]




testJson = [{'image': 'data/testset/9.jpg', 'element': 'checkbox', 'Xmin': 442.7769470214844, 'Ymin': 273.114990234375, 'Xmax': 487.9964904785156, 'Ymax': 296.7840881347656}, {'image': 'data/testset/9.jpg', 'element': 'input', 'Xmin': 378.5519714355469, 'Ymin': 371.9627685546875, 'Xmax': 503.2818298339844, 'Ymax': 403.1077880859375}, {'image': 'data/testset/9.jpg', 'element': 'container', 'Xmin': 100.77007293701172, 'Ymin': 72.8052978515625, 'Xmax': 583.8248901367188, 'Ymax': 589.2657470703125}, {'image': 'data/testset/9.jpg', 'element': 'input', 'Xmin': 374.1836853027344, 'Ymin': 335.9939880371094, 'Xmax': 508.28448486328125, 'Ymax': 368.3572692871094}, {'image': 'data/testset/9.jpg', 'element': 'heading', 'Xmin': 149.01499938964844, 'Ymin': 260.0863952636719, 'Xmax': 299.1177673339844, 'Ymax': 301.9492492675781}, {'image': 'data/testset/9.jpg', 'element': 'frame', 'Xmin': 146.84783935546875, 'Ymin': 148.29087829589844, 'Xmax': 519.7570190429688, 'Ymax': 261.343505859375}, {'image': 'data/testset/9.jpg', 'element': 'nav', 'Xmin': 121.6964111328125, 'Ymin': 60.6829948425293, 'Xmax': 531.4854736328125, 'Ymax': 134.2144775390625}, {'image': 'data/testset/9.jpg', 'element': 'text', 'Xmin': 157.5534210205078, 'Ymin': 331.3647155761719, 'Xmax': 295.8243103027344, 'Ymax': 433.1098327636719}, {'image': 'data/testset/9.jpg', 'element': 'button', 'Xmin': 375.57177734375, 'Ymin': 417.2091979980469, 'Xmax': 504.2676696777344, 'Ymax': 466.1307678222656}, {'image': 'data/testset/9.jpg', 'element': 'footer', 'Xmin': 139.5625457763672, 'Ymin': 534.2808837890625, 'Xmax': 510.4588928222656, 'Ymax': 597.9498901367188}]



def get_html_element(item):

    x = round((item['Xmin'] / 32)) + 1
    y = round((item['Ymin'] / 32)) + 1

    w = round(((item["Xmax"] - item["Xmin"]) / 32))
    h = round(((item["Ymax"] - item["Ymin"]) / 32))

    if item["element"] == "nav":
        element = f'<div class="c-app__topbar js-nav" style="grid-column:{x} / span {w};grid-row:{y} / span {h};"> <div class="c-app__mobile-nav js-nav-btn"><svg class="c-app__nav-button" xmlns="http://www.w3.org/2000/svg" width="18" height="16" viewBox="0 0 18 16"><g id="SideMenu" transform="translate(-21.5 -26.5)"><g id="Group_6" data-name="Group 6" transform="translate(21.5 27.5)"><line id="Line_1" data-name="Line 1" x2="18" fill="none" stroke="#333" stroke-width="2"/><line id="Line_2" data-name="Line 2" x2="10" transform="translate(4 7)" fill="none" stroke="#333" stroke-width="2"/><line id="Line_3" data-name="Line 3" x2="18" transform="translate(0 14)" fill="none" stroke="#333" stroke-width="2"/></g></g></svg></div>  <div class="c-app__nav"><nav class="c-nav"><ul class="o-list c-nav__list js-nav-list"><a href="#about" class="c-nav__link"><li class="c-nav__item">About</li></a><a href="#experience" class="c-nav__link"><li class="c-nav__item">Experience</li></a><a href="#projects" class="c-nav__link"><li class="c-nav__item">Projects</li></a><a href="#contact" class="c-nav__link"><li class="c-nav__item">Contact    </li></a>  </ul></nav></div></div>'
        
    elif item['element'] == "input":
        element = f'<div class="c-input" style="grid-column:{x} / span {w};grid-row:{y} / span {h};"><input type="text" /></div>'
    
    elif item["element"] == "checkbox":
        element = f'<div class="c-checkbox" style="grid-column:{x} / span {w};grid-row:{y} / span {h};"><label class="switch"> <input type="checkbox"><span class="slider round"></span></label></div>'
    
    elif item["element"] == "heading":
        element = f'<h1 style="grid-column:{x} / span {w};grid-row:{y} / span {h};">Title</h1>'
    
    elif item["element"] == "frame":
        element = f'<div class="c-image" style="min-height:{h * 32}px;grid-column:{x} / span {w};grid-row:{y} / span {h};"></div>'
    
    elif item["element"] == "text":
        loremText = lorem.paragraphs(1)
        element = f'<p class="c-text" style="grid-column:{x} / span {w};grid-row:{y} / span {h};">{loremText}</p>'
    
    elif item['element'] == "button":
        element = f'<a href="#" class="c-nav__link c-button" style="grid-column:{x} / span {w};grid-row:{y} / span {h};">Button</a>'

    elif item['element'] == "footer":
        element = f'<div class="c-footer" style="grid-column:{x} / span {w};grid-row:{y} / span {h};"> <p>footer</p></div>'
    
    return element

Y_priority = sorted(testJson, key=lambda d: d['Ymin'])

in_container = []


htmlString = ""
htmlContainer = ""

for i in Y_priority:
    
    if i["element"] == "container":
        new_list = Y_priority.copy()
        new_list.remove(i)
        
        container = '<div class="c-container">\n'

        for j in new_list:
            
            width = (j["Xmax"] - j['Xmin']) / 2
            height = (j["Ymax"] - j['Ymin']) / 2

            if (i["Xmin"] <= (j['Xmax'] - width) <= i["Xmax"] and (i["Ymin"] <= (j['Ymax'] - height) <= i["Ymax"])):
                Y_priority.remove(j)
                in_container.append(j)

                container += get_html_element(j) + "\n"
        htmlContainer += container + "</div>\n"    

for i in Y_priority:
    if i["element"] == "container":
        htmlString += htmlContainer + "\n"
    else:
        htmlString += get_html_element(i) + "\n"
                


